@page "/vector-tiles"
@using PyroGeoBlazor.Demo.Models
@using PyroGeoBlazor.Leaflet.Components
@using PyroGeoBlazor.Leaflet.Models

<PageTitle>Vector Tiles - PyroGeoBlazor Demo</PageTitle>

<div style="display: flex; flex-direction: row; height: 100%; overflow: hidden;">
    <div style="flex: 0 0 30%; overflow-y: auto; overflow-x: hidden;">
        <MudContainer MaxWidth="MaxWidth.False" Class="pa-4">
            <MudText Typo="Typo.h4" Class="mb-2">Vector Tiles</MudText>
            <MudText Typo="Typo.body2" Color="Color.Secondary" Class="mb-4">High-performance rendering with interactive features, selection, and dynamic styling</MudText>

            <MudCard Class="mb-3">
                <MudCardHeader>
                    <MudText Typo="Typo.h6">Layers</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <MudButton Variant="Variant.Outlined" Color="Color.Success" Size="Size.Small" FullWidth="true"
                               StartIcon="@Icons.Material.Filled.Layers"
                               OnClick="AddVectorTileLayers"
                               Disabled="@layersAdded">
                        Load Vector Layers
                    </MudButton>

                    @if (layersAdded)
                    {
                        <MudDivider Class="my-2" />
                        <MudText Typo="Typo.subtitle2" Class="mb-2">Interactivity</MudText>
                        <MudStack Spacing="1">
                            <MudSwitch T="bool" Color="Color.Primary" Label="@($"Interactive ({(isInteractive ? "On" : "Off")})")"
                                       @bind-Value="@isInteractive" Dense="true" />
                            <MudSwitch T="bool" Color="Color.Primary" Label="@($"Selection ({(selectionEnabled ? "On" : "Off")})")"
                                       @bind-Value="@selectionEnabled" 
                                       Disabled="@(!isInteractive)" Dense="true" />
                            <MudSwitch T="bool" Color="Color.Primary" Label="@($"Multi-Select ({(multiSelectEnabled ? "On" : "Off")})")"
                                       @bind-Value="@multiSelectEnabled" 
                                       Disabled="@(!selectionEnabled)" Dense="true" />
                        </MudStack>

                        <MudButton Variant="Variant.Outlined" Color="Color.Error" Size="Size.Small" FullWidth="true"
                                   StartIcon="@Icons.Material.Filled.Clear"
                                   OnClick="ClearSelection"
                                   Disabled="@(!selectionEnabled)"
                                   Class="mt-2">
                            Clear Selection
                        </MudButton>
                    }
                </MudCardContent>
            </MudCard>

            <MudCard Class="mb-3">
                <MudCardHeader>
                    <MudText Typo="Typo.h6">Features</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <MudList Dense="true" T="string">
                        <MudListItem>Interactive hover effects</MudListItem>
                        <MudListItem>Feature selection</MudListItem>
                        <MudListItem>Multi-segment support</MudListItem>
                        <MudListItem>Dynamic styling</MudListItem>
                        <MudListItem>Runtime control</MudListItem>
                    </MudList>
                </MudCardContent>
            </MudCard>

            <MudCard Class="mb-3">
                <MudCardHeader>
                    <MudText Typo="Typo.h6">Vector Tile Layers</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <MudText Typo="Typo.body2">
                        <strong>Format:</strong> Mapbox Vector Tiles (PBF)<br/>
                        <strong>Protocol:</strong> WMTS<br/>
                        <strong>Layers:</strong> Townships, Extensions, Parcels<br/>
                        <strong>Styling:</strong> Dynamic per layer<br/>
                        <strong>Selection:</strong> Multi-feature support
                    </MudText>
                </MudCardContent>
            </MudCard>

            <MudButton Variant="Variant.Text" Color="Color.Primary" StartIcon="@Icons.Material.Filled.ArrowBack" Href="/" Class="mt-3">
                Back to Home
            </MudButton>
        </MudContainer>
    </div>

    <div style="flex: 1 1 70%; min-width: 0; overflow: hidden;">
        <LeafletMap Height="100%" Map="PositionMap" TileLayer="OpenStreetMapsTileLayer" Controls="MapControls" />
    </div>
</div>
