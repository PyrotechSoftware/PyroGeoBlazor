@page "/basic-map"
@using PyroGeoBlazor.Demo.Models
@using PyroGeoBlazor.Leaflet.Components
@using PyroGeoBlazor.Leaflet.Models

<PageTitle>Basic Map - PyroGeoBlazor Demo</PageTitle>

<div style="display: flex; flex-direction: column; height: 100%; overflow: hidden;">
<div style="flex: 0 0 auto;">
    <MudContainer MaxWidth="MaxWidth.False" Class="pa-4">
        <MudText Typo="Typo.h4" Class="mb-2">Basic Map Features</MudText>
        <MudText Typo="Typo.body2" Color="Color.Secondary" Class="mb-4">Explore fundamental Leaflet mapping capabilities with PyroGeoBlazor</MudText>

            <MudGrid>
                <MudItem xs="12" md="4">
                    <MudCard>
                        <MudCardHeader>
                            <MudText Typo="Typo.h6">Navigation</MudText>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudStack Spacing="2">
                                <MudButton Variant="Variant.Outlined" Color="Color.Primary" Size="Size.Small" FullWidth="true"
                                           StartIcon="@Icons.Material.Filled.LocationOn"
                                           OnClick="() => PositionMap?.SetView(new LatLng(51.505, -0.09), 13)">
                                    Go to London
                                </MudButton>
                                <MudButton Variant="Variant.Outlined" Color="Color.Primary" Size="Size.Small" FullWidth="true"
                                           StartIcon="@Icons.Material.Filled.LocationOn"
                                           OnClick="() => PositionMap?.SetView(new LatLng(40.7128, -74.0060), 13)">
                                    Go to New York
                                </MudButton>
                                <MudButton Variant="Variant.Outlined" Color="Color.Primary" Size="Size.Small" FullWidth="true"
                                           StartIcon="@Icons.Material.Filled.LocationOn"
                                           OnClick="() => PositionMap?.SetView(new LatLng(-33.8688, 151.2093), 13)">
                                    Go to Sydney
                                </MudButton>
                            </MudStack>
                        </MudCardContent>
                    </MudCard>
                </MudItem>

                <MudItem xs="12" md="4">
                    <MudCard>
                        <MudCardHeader>
                            <MudText Typo="Typo.h6">Markers</MudText>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudButton Variant="Variant.Outlined" Color="Color.Success" Size="Size.Small" FullWidth="true"
                                       StartIcon="@Icons.Material.Filled.AddLocation"
                                       OnClick="AddMarkerAtMapCenter">
                                Add Marker at Center
                            </MudButton>
                        </MudCardContent>
                    </MudCard>
                </MudItem>

                <MudItem xs="12" md="4">
                    <MudCard>
                        <MudCardHeader>
                            <MudText Typo="Typo.h6">Geolocation & State</MudText>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudStack Spacing="2">
                                <MudButton Variant="Variant.Outlined" Color="Color.Info" Size="Size.Small" FullWidth="true"
                                           StartIcon="@Icons.Material.Filled.MyLocation"
                                           OnClick="Locate">
                                    Locate Me
                                </MudButton>
                                <MudDivider />
                                <MudText Typo="Typo.body2">
                                    <strong>Center:</strong> @MapStateViewModel.MapCentreLatitude.ToString("F4"), @MapStateViewModel.MapCentreLongitude.ToString("F4")<br />
                                    <strong>Zoom:</strong> @MapStateViewModel.Zoom
                                </MudText>
                                <MudButton Variant="Variant.Outlined" Color="Color.Default" Size="Size.Small" FullWidth="true"
                                           StartIcon="@Icons.Material.Filled.Refresh"
                                           OnClick="GetMapState">
                                    Refresh State
                                </MudButton>
                            </MudStack>
                        </MudCardContent>
                    </MudCard>
                </MudItem>
            </MudGrid>

            <MudButton Variant="Variant.Text" Color="Color.Primary" StartIcon="@Icons.Material.Filled.ArrowBack" Href="/" Class="mt-3">
                Back to Home
            </MudButton>
        </MudContainer>
    </div>

    <div style="flex: 1 1 auto; min-height: 0; overflow: hidden;">
        <LeafletMap Height="100%" Map="PositionMap" TileLayer="OpenStreetMapsTileLayer" Controls="MapControls" />
    </div>
</div>
