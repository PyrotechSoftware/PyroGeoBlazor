(()=>{var o={};function l(r){if(typeof L>"u"){console.error("Leaflet (L) is not loaded. Please ensure leaflet.js is included before leafletInterop.js.");return}let e=L.map(r).setView([0,0],2),a=L.layerGroup().addTo(e);return o[r]={map:e,layers:{},markerGroup:a},e}function p(r,e,a,t){if(!r){console.error("No map instance provided to setView.");return}r.setView([e,a],t)}function d(){return new Promise((r,e)=>{if(typeof L<"u"){r();return}let a=document.createElement("link");a.rel="stylesheet",a.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(a);let t=document.createElement("script");t.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",t.onload=()=>{typeof L<"u"?r():e(new Error("Leaflet failed to load."))},t.onerror=()=>e(new Error("Leaflet script failed to load.")),document.body.appendChild(t)})}function s(r,e,a){let t=o[r];if(!t)return;let n=L.geoJSON(a);n.addTo(t.map),t.layers[e]=n}function m(r,e){let a=o[r];a?.layers[e]&&(a.map.removeLayer(a.layers[e]),delete a.layers[e])}function f(r,e,a,t){let n=o[r];if(!n)return;let i=L.marker([e,a]);t&&i.bindPopup(t),i.addTo(n.markerGroup)}function c(r){let e=o[r];e&&e.markerGroup.clearLayers()}function y(r){let e=o[r];if(!e)return;let a={OpenStreetMap:L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png")},t=e.layers;L.control.layers(a,t).addTo(e.map)}function u(r,e,a){let t=o[r];if(!t)return;t.layers.__basemap__&&(t.map.removeLayer(t.layers.__basemap__),delete t.layers.__basemap__);let n=L.tileLayer(e,{attribution:a});n.addTo(t.map),t.layers.__basemap__=n}window.leafletMap={initMap:async(r,e)=>{await d();let a=l(r);return e&&s(r,"default",e),a},addLayer:s,removeLayer:m,addMarker:f,clearMarkers:c,addLayerControl:y,setBasemap:u,setView:p};})();
